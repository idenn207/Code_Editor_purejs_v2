<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EditContext Code Editor - Demo</title>
  <link rel="stylesheet" href="styles/editor.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0d1117;
      color: #c9d1d9;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      margin-bottom: 20px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    h1 .badge {
      font-size: 12px;
      padding: 2px 8px;
      background: #238636;
      border-radius: 12px;
    }

    .subtitle {
      color: #8b949e;
      margin-bottom: 15px;
    }

    .info-bar {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      padding: 10px 15px;
      background: #161b22;
      border-radius: 6px;
      font-size: 14px;
      flex-wrap: wrap;
    }

    .info-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }

    .badge-success {
      background: #238636;
      color: white;
    }

    .badge-warning {
      background: #9e6a03;
      color: white;
    }

    .badge-info {
      background: #1f6feb;
      color: white;
    }

    #editor-container {
      height: 500px;
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid #30363d;
    }

    .controls {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      padding: 8px 16px;
      border: 1px solid #30363d;
      border-radius: 6px;
      background: #21262d;
      color: #c9d1d9;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background: #30363d;
    }

    button:active {
      background: #484f58;
    }

    .panels {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    @media (max-width: 800px) {
      .panels {
        grid-template-columns: 1fr;
      }
    }

    .panel {
      background: #161b22;
      border-radius: 6px;
      overflow: hidden;
    }

    .panel-header {
      padding: 10px 15px;
      background: #21262d;
      font-weight: 500;
      font-size: 14px;
      border-bottom: 1px solid #30363d;
    }

    .panel-content {
      padding: 15px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 13px;
      max-height: 200px;
      overflow: auto;
    }

    .panel-content pre {
      white-space: pre-wrap;
      word-break: break-all;
    }

    .keyboard-shortcuts {
      margin-top: 20px;
      padding: 15px;
      background: #161b22;
      border-radius: 6px;
    }

    .keyboard-shortcuts h3 {
      font-size: 14px;
      margin-bottom: 10px;
    }

    .shortcuts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 8px;
      font-size: 13px;
    }

    .shortcut {
      display: flex;
      justify-content: space-between;
    }

    kbd {
      background: #30363d;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: inherit;
      font-size: 12px;
    }

    footer {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #30363d;
      font-size: 13px;
      color: #8b949e;
    }

    footer a {
      color: #58a6ff;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .feature-list {
      margin: 15px 0;
      padding-left: 20px;
    }

    .feature-list li {
      margin: 5px 0;
      color: #8b949e;
    }

    .feature-list li::marker {
      color: #238636;
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>
        üñ•Ô∏è EditContext Code Editor
        <span class="badge">v1.1.0</span>
      </h1>
      <p class="subtitle">A modern code editor with Auto-Complete, using the EditContext API with textarea fallback</p>
    </header>

    <div class="info-bar">
      <div class="info-item">
        <span>Input Mode:</span>
        <span id="input-mode" class="badge">Loading...</span>
      </div>
      <div class="info-item">
        <span>EditContext:</span>
        <span id="ec-support" class="badge">Checking...</span>
      </div>
      <div class="info-item">
        <span>Cursor:</span>
        <span id="cursor-pos">0:0</span>
      </div>
      <div class="info-item">
        <span>Symbols:</span>
        <span id="symbol-count">0</span>
      </div>
      <div class="info-item">
        <span>Errors:</span>
        <span id="error-count" class="badge badge-success">0</span>
      </div>
    </div>

    <div id="editor-container"></div>

    <div class="controls">
      <button id="btn-get-value">Get Value</button>
      <button id="btn-set-value">Load Sample</button>
      <button id="btn-undo">Undo</button>
      <button id="btn-redo">Redo</button>
      <button id="btn-autocomplete">Trigger Auto-Complete</button>
      <button id="btn-toggle-theme">Toggle Theme</button>
      <button id="btn-show-ast">Show AST</button>
      <button id="btn-show-symbols">Show Symbols</button>
    </div>

    <div class="panels">
      <div class="panel">
        <div class="panel-header">üìù Output / AST</div>
        <div class="panel-content">
          <pre id="output">Click buttons above to see output</pre>
        </div>
      </div>
      <div class="panel">
        <div class="panel-header">üîç Symbols</div>
        <div class="panel-content">
          <pre id="symbols-output">Symbols will appear here after analysis</pre>
        </div>
      </div>
    </div>

    <div class="keyboard-shortcuts">
      <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
      <div class="shortcuts-grid">
        <div class="shortcut"><span>Undo</span><kbd>Ctrl+Z</kbd></div>
        <div class="shortcut"><span>Redo</span><kbd>Ctrl+Y</kbd></div>
        <div class="shortcut"><span>Select All</span><kbd>Ctrl+A</kbd></div>
        <div class="shortcut"><span>Copy</span><kbd>Ctrl+C</kbd></div>
        <div class="shortcut"><span>Cut</span><kbd>Ctrl+X</kbd></div>
        <div class="shortcut"><span>Paste</span><kbd>Ctrl+V</kbd></div>
        <div class="shortcut"><span>Word Left</span><kbd>Ctrl+‚Üê</kbd></div>
        <div class="shortcut"><span>Word Right</span><kbd>Ctrl+‚Üí</kbd></div>
        <div class="shortcut"><span>Line Start</span><kbd>Home</kbd></div>
        <div class="shortcut"><span>Line End</span><kbd>End</kbd></div>
        <div class="shortcut"><span>Doc Start</span><kbd>Ctrl+Home</kbd></div>
        <div class="shortcut"><span>Doc End</span><kbd>Ctrl+End</kbd></div>
      </div>
      <p style="margin-top: 15px; color: #8b949e; font-size: 13px;">
        üí° <strong>Tip:</strong> Type a variable name followed by <kbd>.</kbd> to see member completions.
        Auto-complete also appears when typing identifiers.
      </p>
    </div>

    <footer>
      <p>
        <strong>Features in v1.1.0:</strong>
      </p>
      <ul class="feature-list">
        <li>‚úÖ Monarch-style tokenizer with state machine</li>
        <li>‚úÖ Multi-line comment/string support</li>
        <li>‚úÖ Recursive descent parser ‚Üí AST</li>
        <li>‚úÖ Symbol table with scope hierarchy</li>
        <li>‚úÖ Context-aware auto-complete</li>
        <li>‚úÖ Member completions (obj.)</li>
        <li>‚úÖ Keyword and snippet suggestions</li>
      </ul>
      <p style="margin-top: 15px;">
        EditContext API is available in Chrome 121+ and Edge 121+.
        <a href="https://developer.mozilla.org/en-US/docs/Web/API/EditContext_API" target="_blank">Learn more on MDN</a>
      </p>
      <p style="margin-top: 8px;">
        Try typing in Korean, Japanese, or Chinese to test IME support! ÌïúÍ∏Ä Êó•Êú¨Ë™û ‰∏≠Êñá
      </p>
    </footer>
  </div>

  <script type="module" src="src/app.js"></script>
</body>

</html>